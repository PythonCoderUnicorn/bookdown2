<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 3 Tidyverse | RLadies Knowledge</title>
<meta name="author" content="Zane Dax">
<meta name="description" content="The tidyverse has its own book called R for Data Science by Hadley Wickham &amp; Garrett Grolemund (available online). This section will discuss a few functions out of the library that are very useful...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 3 Tidyverse | RLadies Knowledge">
<meta property="og:type" content="book">
<meta property="og:description" content="The tidyverse has its own book called R for Data Science by Hadley Wickham &amp; Garrett Grolemund (available online). This section will discuss a few functions out of the library that are very useful...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 3 Tidyverse | RLadies Knowledge">
<meta name="twitter:description" content="The tidyverse has its own book called R for Data Science by Hadley Wickham &amp; Garrett Grolemund (available online). This section will discuss a few functions out of the library that are very useful...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">RLadies Knowledge</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> About</a></li>
<li><a class="" href="hello-rladies.html"><span class="header-section-number">2</span> Hello RLadies</a></li>
<li><a class="active" href="tidyverse.html"><span class="header-section-number">3</span> Tidyverse</a></li>
<li><a class="" href="geo-data.html"><span class="header-section-number">4</span> Geo Data</a></li>
<li><a class="" href="footnotes-and-citations.html"><span class="header-section-number">5</span> Footnotes and citations</a></li>
<li><a class="" href="blocks.html"><span class="header-section-number">6</span> Blocks</a></li>
<li><a class="" href="sharing-your-book.html"><span class="header-section-number">7</span> Sharing your book</a></li>
<li><a class="" href="references.html">References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/PythonCoderUnicorn/bookdown2">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="tidyverse" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Tidyverse<a class="anchor" aria-label="anchor" href="#tidyverse"><i class="fas fa-link"></i></a>
</h1>
<p>The tidyverse has its own book called <em>R for Data Science</em> by Hadley Wickham &amp; Garrett Grolemund (available online). This section will discuss a few functions out of the library that are very useful to know.</p>
<div id="tidy-data" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Tidy Data<a class="anchor" aria-label="anchor" href="#tidy-data"><i class="fas fa-link"></i></a>
</h2>
<p>Data Transformation and Introduction to <strong>Tidyverse</strong> library. This section is by <strong>RLadies Freiburg</strong> Divya Seernani.
Tidy data is data that has data or values for each column (variable) and each row (observation). The paradigm:
<code>import</code> -&gt; <code>tidy</code> -&gt; [Transform &lt;-&gt; Visualize &lt;-&gt; Model] -&gt; Communicate</p>
<div id="dplyr-library" class="section level3" number="3.1.1">
<h3>
<span class="header-section-number">3.1.1</span> dplyr library<a class="anchor" aria-label="anchor" href="#dplyr-library"><i class="fas fa-link"></i></a>
</h3>
<p>Inside the <strong>tidyverse</strong> library is the dplyr library which is helpful when creating new variables, renaming or reordering observations, selecting specific observations and calculating summary statistics among many other functions.</p>
<p>The dataset for this section will be the Indian Census (2011), dataset is available <a href="https://github.com/nishusharma1608/India-Census-2011-Analysis/blob/master/india-districts-census-2011.csv">here</a>. <em>Remember to click on ‘raw’ data format first to load in data, you should see white background and black text CSV data, copy the url link in order to read in the data</em>.</p>
<p>The tidyverse library brings along other libraries and when you load tidyverse you will a bunch of warnings in the console, these are no concern to you, basically telling you that one library hides another for function use. To turn off warnings in your Rmd file, inside the code chunk {r} set warning to false <code>{r, warning= FALSE, message= FALSE}</code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># step 1 - install tidyverse library</span>
<span class="co"># install.packages('tidyverse')  # comment-out to run </span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>

<span class="co"># read in the data</span>
<span class="va">india_census</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">'https://raw.githubusercontent.com/nishusharma1608/India-Census-2011-Analysis/master/india-districts-census-2011.csv'</span><span class="op">)</span></code></pre></div>
<div id="filter" class="section level4" number="3.1.1.1">
<h4>
<span class="header-section-number">3.1.1.1</span> filter<a class="anchor" aria-label="anchor" href="#filter"><i class="fas fa-link"></i></a>
</h4>
<p>We now want to <strong>filter</strong> data only from Maharashtra and Gajarat, we will call the variable <code>WestStates</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">WestStates</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">india_census</span>, <span class="va">state.name</span> <span class="op">==</span> <span class="st">'Maharashtra'</span> <span class="op">|</span> <span class="va">State.name</span> <span class="op">==</span><span class="st">'Gajarat'</span><span class="op">)</span> </code></pre></div>
</div>
<div id="arrange" class="section level4" number="3.1.1.2">
<h4>
<span class="header-section-number">3.1.1.2</span> arrange<a class="anchor" aria-label="anchor" href="#arrange"><i class="fas fa-link"></i></a>
</h4>
<p><strong>Arrange</strong> the west states in descending order (highest to lowest) by agricultural workers.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">AgriDist</span><span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">WestStates</span>, <span class="va">Agricultural_Workers</span><span class="op">)</span>
<span class="va">AgriDistDes</span><span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">WestStates</span>, <span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">Agricultural_Workers</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="mutate" class="section level4" number="3.1.1.3">
<h4>
<span class="header-section-number">3.1.1.3</span> mutate<a class="anchor" aria-label="anchor" href="#mutate"><i class="fas fa-link"></i></a>
</h4>
<p>Using the <strong>mutate</strong> function to calculate the percentage of computers &amp; internet per households.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">india_census</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">india_census</span>,
                      Percent_Internet <span class="op">=</span> <span class="va">Households_with_Internet</span> <span class="op">/</span> <span class="va">Households</span> <span class="op">*</span> <span class="fl">100</span>,
                      Percent_Computer <span class="op">=</span> <span class="va">Households_with_Computer</span> <span class="op">/</span> <span class="va">Households</span> <span class="op">*</span> <span class="fl">100</span>
                      <span class="op">)</span></code></pre></div>
</div>
<div id="select" class="section level4" number="3.1.1.4">
<h4>
<span class="header-section-number">3.1.1.4</span> select<a class="anchor" aria-label="anchor" href="#select"><i class="fas fa-link"></i></a>
</h4>
<p>Now that we have the percent of homes with internet, let us <strong>select</strong> the data on households with latrines and bathing facilities.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ModernHomes</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">india_census</span>,
                     <span class="va">State.name</span>, <span class="va">District.name</span>, <span class="va">Households</span>, <span class="va">Having_bathing_facility_Total_Households</span>,
                  <span class="va">Having_latrine_facility_within_the_premises_Total_Households</span><span class="op">)</span>

<span class="co"># and standardize the results</span>
<span class="va">ModernHomes2</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="va">ModernHomes</span>, PercentToilet <span class="op">=</span> <span class="va">Having_latrine_facility_within_the_premises_Total_Households</span> <span class="op">/</span> <span class="va">Households</span> <span class="op">*</span> <span class="fl">100</span>,
                     PercentBath <span class="op">=</span> <span class="va">Having_bathing_facility_Total_Households</span> <span class="op">/</span> <span class="va">Households</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span></code></pre></div>
<p>Visualize the data with the library ggplot, which comes attached (loaded) with tidyverse, but is good to load it anyway.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="va">ModernHomesPlot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">ModernHomes2</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">PercentToilet</span>, y<span class="op">=</span><span class="va">PercentBath</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>col<span class="op">=</span><span class="va">State.name</span>, size<span class="op">=</span><span class="va">Households</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"glm"</span>, se<span class="op">=</span><span class="cn">T</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>subtitle<span class="op">=</span><span class="st">"Toilets and Baths"</span>, 
       y<span class="op">=</span><span class="st">"Percentage with Bath"</span>, 
       x<span class="op">=</span><span class="st">"Percentage with Toilet"</span>, 
       title<span class="op">=</span><span class="st">"Scatterplot"</span>, 
       caption <span class="op">=</span> <span class="st">"Indian Census 2011"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/raster/man/plot.html">plot</a></span><span class="op">(</span><span class="va">ModernHomesPlot</span><span class="op">)</span>
<span class="co">#&gt; `geom_smooth()` using formula 'y ~ x'</span></code></pre></div>
<div class="inline-figure"><img src="02-tidyverse_files/figure-html/unnamed-chunk-6-1.png" width="672"></div>
<p>Summary of literacy for all our data by state</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">india_census</span>, Percent_Literate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Literate</span><span class="op">/</span><span class="va">Population</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span> <span class="op">)</span>
<span class="co">#&gt;   Percent_Literate</span>
<span class="co">#&gt; 1          62.4632</span>

<span class="va">Literacy</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">india_census</span>, <span class="va">State.name</span><span class="op">)</span>

<span class="va">LiteracyByState</span> <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="va">Literacy</span>, PercentLiterate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">Literate</span><span class="op">/</span><span class="va">Population</span><span class="op">*</span><span class="fl">100</span><span class="op">)</span> <span class="op">)</span></code></pre></div>
<p>An exercise example, literacy and toilets.</p>
<pre><code>LiteracyHygiene &lt;- select(india.districts.census.2011, State.name, District.name, Literate, Households, Having_latrine_facility_within_the_premises_Total_Households)
LiteracyHygiene_Calculated&lt;-mutate(LiteracyHygiene, PercentToilet = Having_latrine_facility_within_the_premises_Total_Households / Households * 100,
                     AverageLiterate = Literate/Households)

LiteracyHygienePlot &lt;- ggplot(LiteracyHygiene_Calculated, aes(x=PercentToilet, y=AverageLiterate)) + 
  geom_point(aes(col=State.name, size=Households)) + 
  geom_smooth(method="glm", se=T) + 
  labs(subtitle="Toilets and Baths", 
       y="Average Literate People per Household", 
       x="Percentage with Toilet", 
       title="Scatterplot", 
       caption = "Indian Census 2011")

plot(LiteracyHygienePlot)

library(plotly)
ggplotly(LiteracyHygienePlot)
</code></pre>

</div>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="hello-rladies.html"><span class="header-section-number">2</span> Hello RLadies</a></div>
<div class="next"><a href="geo-data.html"><span class="header-section-number">4</span> Geo Data</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#tidyverse"><span class="header-section-number">3</span> Tidyverse</a></li>
<li>
<a class="nav-link" href="#tidy-data"><span class="header-section-number">3.1</span> Tidy Data</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#dplyr-library"><span class="header-section-number">3.1.1</span> dplyr library</a></li></ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/PythonCoderUnicorn/bookdown2/blob/master/02-tidyverse.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/PythonCoderUnicorn/bookdown2/edit/master/02-tidyverse.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>RLadies Knowledge</strong>" was written by Zane Dax. It was last built on 2022-01-19.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
